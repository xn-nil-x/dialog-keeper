# üìû –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ê–¢–° –ú–¢–°

## –û–±–∑–æ—Ä

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Dialog Keeper —Å —Ü–∏—Ñ—Ä–æ–≤–æ–π –ê–¢–° –ú–¢–° –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏ –µ–¥–∏–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏, —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞—Ç—å –∏—Ö, —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –≤–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–π –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –ß—Ç–æ –¥–∞—ë—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∑–≤–æ–Ω–∫–æ–≤**  
   –í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –∏ –∏—Å—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç

2. **–ï–¥–∏–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π**  
   –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã –∑–≤–æ–Ω–∫–æ–≤ –≤–µ–∫—Ç–æ—Ä–∏–∑—É—é—Ç—Å—è –∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è RAG-—Å–∏—Å—Ç–µ–º—ã

3. **–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º**  
   –ó–≤–æ–Ω–∫–∏ —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π –æ–±—Ä–∞—â–µ–Ω–∏–π

4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤**  
   –ü—Ä–∏ –≤—ã—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–∏–∫–µ—Ç—ã –≤ Kaiten

5. **Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**  
   –ö–æ–º–∞–Ω–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö –∏ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–∞—Ö

6. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**  
   –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–≤–æ–Ω–∫–æ–≤, –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –ø—Ä–æ–±–ª–µ–º, —Ç–æ–ø –≤–æ–ø—Ä–æ—Å–æ–≤

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ö–õ–ò–ï–ù–¢ –ó–í–û–ù–ò–¢                            ‚îÇ
‚îÇ              –Ω–∞ –µ–¥–∏–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ   MTS Digital PBX    ‚îÇ
              ‚îÇ   (–¶–∏—Ñ—Ä–æ–≤–∞—è –ê–¢–°)     ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                         ‚îÇ                 ‚îÇ
                         ‚ñº                 ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ  Call Recording  ‚îÇ  ‚îÇ  Webhook    ‚îÇ
              ‚îÇ  (–ê—É–¥–∏–æ–∑–∞–ø–∏—Å—å)   ‚îÇ  ‚îÇ  Events     ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ                  ‚îÇ
                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                                   ‚ñº
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ   n8n Workflow   ‚îÇ
                        ‚îÇ   –∏–ª–∏ API Client ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   ‚îÇ               ‚îÇ               ‚îÇ
                   ‚ñº               ‚ñº               ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ   Whisper   ‚îÇ  ‚îÇ  Metadata    ‚îÇ  ‚îÇ   Team   ‚îÇ
         ‚îÇ     API     ‚îÇ  ‚îÇ  Storage     ‚îÇ  ‚îÇ  Alert   ‚îÇ
         ‚îÇ(Transcribe) ‚îÇ  ‚îÇ(PostgreSQL)  ‚îÇ  ‚îÇ(Telegram)‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  AI Classifier  ‚îÇ
         ‚îÇ  (Intent/Topic) ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  Vectorization  ‚îÇ
         ‚îÇ  (Embeddings)   ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  Qdrant Store   ‚îÇ
         ‚îÇ (Knowledge Base)‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Workflow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫

```mermaid
graph TD
    A[–ö–ª–∏–µ–Ω—Ç –∑–≤–æ–Ω–∏—Ç –Ω–∞ –Ω–æ–º–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∫–∏] --> B[MTS PBX –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–≤–æ–Ω–æ–∫]
    B --> C[–û–ø–µ—Ä–∞—Ç–æ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç]
    C --> D[–†–∞–∑–≥–æ–≤–æ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è]
    D --> E[–ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω]
    E --> F[MTS –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç Webhook]
    F --> G[n8n –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ]
    G --> H[–°–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ–∑–∞–ø–∏—Å—å]
    H --> I[–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —á–µ—Ä–µ–∑ Whisper]
    I --> J[–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è]
    J --> K[–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤]
    K --> L[–í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è]
    L --> M[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Qdrant]
    M --> N[–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã]
    J --> O{–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ?}
    O -->|–î–∞| P[–°–æ–∑–¥–∞—Ç—å —Ç–∏–∫–µ—Ç –≤ Kaiten]
    O -->|–ù–µ—Ç| Q[–¢–æ–ª—å–∫–æ –∞—Ä—Ö–∏–≤–∞—Ü–∏—è]
```

### 2. –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫

```mermaid
graph TD
    A[–ö–ª–∏–µ–Ω—Ç –∑–≤–æ–Ω–∏—Ç] --> B[MTS PBX]
    B --> C{–û–ø–µ—Ä–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω?}
    C -->|–ù–µ—Ç| D[–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫]
    D --> E[MTS Webhook: missed call]
    E --> F[n8n Workflow]
    F --> G[–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫–ª–∏–µ–Ω—Ç–∞]
    G --> H[–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram]
    H --> I[–ö–Ω–æ–ø–∫–∞: –ü–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç—å]
```

### 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π

```mermaid
graph TD
    A[Scheduled Task: –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞] --> B[–ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–µ –∑–≤–æ–Ω–∫–∏]
    B --> C[–§–∏–ª—å—Ç—Ä: —Ç–æ–ª—å–∫–æ —Ä–µ—à—ë–Ω–Ω—ã–µ]
    C --> D[–ò–∑–≤–ª–µ—á—å Q&A –ø–∞—Ä—ã]
    D --> E[–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã ‚Üí —Ç–µ–∫—Å—Ç]
    E --> F[–í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ embeddings]
    F --> G[–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Qdrant]
    G --> H{–ü–æ—Ö–æ–∂–∏–µ –≤–æ–ø—Ä–æ—Å—ã —É–∂–µ –µ—Å—Ç—å?}
    H -->|–î–∞| I[–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç]
    H -->|–ù–µ—Ç| J[–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π entry]
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### MTS Digital PBX API

#### Endpoints

**1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–≤–æ–Ω–∫–æ–≤**
```http
GET https://api.mts.ru/pbx/v1/calls
Authorization: Bearer {TOKEN}
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `date_from` - –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ (ISO 8601)
- `date_to` - –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞
- `direction` - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: `inbound`, `outbound`, `all`
- `status` - —Å—Ç–∞—Ç—É—Å: `answered`, `missed`, `busy`, `all`
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100)

**Response:**
```json
{
  "calls": [
    {
      "id": "call_123456",
      "phone_number": "+79161234567",
      "direction": "inbound",
      "status": "answered",
      "duration": 125,
      "started_at": "2026-01-08T10:30:00Z",
      "ended_at": "2026-01-08T10:32:05Z",
      "recording_url": "https://api.mts.ru/pbx/v1/recordings/rec_123456",
      "transcript_url": "https://api.mts.ru/pbx/v1/transcripts/trans_123456"
    }
  ],
  "total": 42,
  "page": 1
}
```

**2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –∑–≤–æ–Ω–∫–∞**
```http
GET https://api.mts.ru/pbx/v1/recordings/{recording_id}
Authorization: Bearer {TOKEN}
```

**Response:**
- Content-Type: `audio/wav` –∏–ª–∏ `audio/mp3`
- –ë–∏–Ω–∞—Ä–Ω—ã–π –∞—É–¥–∏–æ—Ñ–∞–π–ª

**3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)**
```http
GET https://api.mts.ru/pbx/v1/transcripts/{transcript_id}
Authorization: Bearer {TOKEN}
```

**Response:**
```json
{
  "transcript_id": "trans_123456",
  "call_id": "call_123456",
  "language": "ru",
  "text": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, —É –º–µ–Ω—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ API...",
  "confidence": 0.95,
  "words": [
    {
      "word": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ",
      "start_time": 0.5,
      "end_time": 1.2,
      "confidence": 0.98
    }
  ]
}
```

**4. Webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**

MTS –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π URL –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö:
- –ù–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫
- –ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω
- –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫

```http
POST https://your-domain.com/api/webhooks/mts-pbx
Content-Type: application/json
X-MTS-Signature: {HMAC_SHA256}

{
  "event": "call.ended",
  "call_id": "call_123456",
  "phone_number": "+79161234567",
  "direction": "inbound",
  "status": "answered",
  "duration": 125,
  "timestamp": "2026-01-08T10:32:05Z"
}
```

---

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. n8n Workflow: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–≤–æ–Ω–∫–∞

**Trigger:** Webhook (–æ—Ç MTS)

**Nodes:**

```yaml
1. Webhook Trigger
   - URL: /webhooks/mts-call
   - Method: POST
   - Authentication: HMAC signature verification

2. Filter: Call Ended
   - Condition: event == "call.ended"
   - –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏

3. HTTP Request: Get Call Metadata
   - URL: https://api.mts.ru/pbx/v1/calls/{{$json.call_id}}
   - Method: GET
   - Authentication: Bearer Token

4. HTTP Request: Download Recording
   - URL: {{$json.recording_url}}
   - Method: GET
   - Response Type: Binary

5. OpenAI Whisper: Transcribe
   - Model: whisper-1
   - Language: ru
   - Input: Binary audio file

6. Set Variables: Prepare Context
   - Variables:
       - call_id
       - phone_number
       - transcript
       - duration
       - timestamp

7. OpenAI GPT: Classify & Extract
   - Prompt: "–ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–∞. –ò–∑–≤–ª–µ–∫–∏ –≤–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–æ–±–ª–µ–º—ã –∫–ª–∏–µ–Ω—Ç–∞."
   - Model: gpt-4o-mini
   - Output: JSON

8. PostgreSQL: Save Call
   - Table: calls
   - Fields: call_id, phone_number, transcript, metadata, classification

9. Python Code: Generate Embeddings
   - Input: transcript
   - Model: text-embedding-3-small
   - Output: vector[1536]

10. HTTP Request: Save to Qdrant
    - URL: http://qdrant:6333/collections/calls/points
    - Method: PUT
    - Body: {vector, metadata}

11. Switch: Check if Action Required
    - If classification.intent == "issue" ‚Üí Create Ticket
    - Else ‚Üí Skip

12. HTTP Request: Create Kaiten Ticket (conditional)
    - URL: https://api.kaiten.ru/v1/cards
    - Method: POST
    - Body: ticket data

13. Telegram: Notify Team
    - Chat: Internal Team Channel
    - Message: "üìû –ù–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫ –æ—Ç {{phone_number}}\n–¢–µ–º–∞: {{classification.topic}}\n–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {{duration}}—Å"
    - Button: "–û—Ç–∫—Ä—ã—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç"
```

### 2. Python Service: Call Processor

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Python —Å–µ—Ä–≤–∏—Å:

```python
# src/integrations/mts_pbx.py

import requests
from openai import OpenAI
from qdrant_client import QdrantClient

class MTSPBXClient:
    def __init__(self, api_token: str, base_url: str):
        self.token = api_token
        self.base_url = base_url
        self.headers = {"Authorization": f"Bearer {self.token}"}
        self.openai = OpenAI()
        self.qdrant = QdrantClient(url="http://qdrant:6333")
    
    def get_calls(self, date_from: str, date_to: str) -> list:
        """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–≤–æ–Ω–∫–æ–≤"""
        response = requests.get(
            f"{self.base_url}/calls",
            headers=self.headers,
            params={"date_from": date_from, "date_to": date_to}
        )
        return response.json()["calls"]
    
    def download_recording(self, recording_url: str) -> bytes:
        """–°–∫–∞—á–∞—Ç—å –∞—É–¥–∏–æ–∑–∞–ø–∏—Å—å"""
        response = requests.get(recording_url, headers=self.headers)
        return response.content
    
    def transcribe_call(self, audio_data: bytes) -> str:
        """–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞—Ç—å –∑–≤–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ Whisper"""
        response = self.openai.audio.transcriptions.create(
            model="whisper-1",
            file=("audio.wav", audio_data),
            language="ru"
        )
        return response.text
    
    def classify_call(self, transcript: str) -> dict:
        """–ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–∞"""
        prompt = f"""
        –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç –∑–≤–æ–Ω–∫–∞ –∏ –∏–∑–≤–ª–µ–∫–∏:
        1. –¢–∏–ø –∑–≤–æ–Ω–∫–∞ (question, issue, request, info)
        2. –û—Å–Ω–æ–≤–Ω—É—é —Ç–µ–º—É
        3. –ö–ª—é—á–µ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–∞
        4. –ù—É–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∏–∫–µ—Ç? (–¥–∞/–Ω–µ—Ç)
        
        –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç:
        {transcript}
        
        –û—Ç–≤–µ—Ç—å –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ.
        """
        
        response = self.openai.chat.completions.create(
            model="gpt-4o-mini",
            messages=[{"role": "user", "content": prompt}],
            response_format={"type": "json_object"}
        )
        
        return response.choices[0].message.content
    
    def vectorize_and_store(self, transcript: str, metadata: dict):
        """–í–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Qdrant"""
        # Generate embedding
        embedding_response = self.openai.embeddings.create(
            model="text-embedding-3-small",
            input=transcript
        )
        vector = embedding_response.data[0].embedding
        
        # Store in Qdrant
        self.qdrant.upsert(
            collection_name="calls",
            points=[{
                "id": metadata["call_id"],
                "vector": vector,
                "payload": {
                    "transcript": transcript,
                    "phone_number": metadata["phone_number"],
                    "timestamp": metadata["timestamp"],
                    "classification": metadata["classification"]
                }
            }]
        )
    
    def process_call(self, call_id: str):
        """–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–∞"""
        # 1. Get call metadata
        call_data = self.get_calls(...)  # filter by call_id
        
        # 2. Download recording
        audio = self.download_recording(call_data["recording_url"])
        
        # 3. Transcribe
        transcript = self.transcribe_call(audio)
        
        # 4. Classify
        classification = self.classify_call(transcript)
        
        # 5. Store in DB
        # ... PostgreSQL insert ...
        
        # 6. Vectorize and store in Qdrant
        self.vectorize_and_store(transcript, {
            "call_id": call_id,
            "phone_number": call_data["phone_number"],
            "timestamp": call_data["timestamp"],
            "classification": classification
        })
        
        # 7. Create ticket if needed
        if classification.get("create_ticket"):
            self.create_kaiten_ticket(...)
        
        # 8. Notify team
        self.notify_team(...)
```

### 3. Webhook Handler

```python
# src/api/webhooks.py

from fastapi import APIRouter, Request, HTTPException
import hmac
import hashlib

router = APIRouter()

def verify_mts_signature(payload: bytes, signature: str, secret: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ HMAC –ø–æ–¥–ø–∏—Å–∏ –æ—Ç MTS"""
    expected = hmac.new(
        secret.encode(),
        payload,
        hashlib.sha256
    ).hexdigest()
    return hmac.compare_digest(expected, signature)

@router.post("/webhooks/mts-pbx")
async def mts_pbx_webhook(request: Request):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ webhook –æ—Ç MTS PBX"""
    # Verify signature
    signature = request.headers.get("X-MTS-Signature")
    payload = await request.body()
    
    if not verify_mts_signature(payload, signature, settings.MTS_WEBHOOK_SECRET):
        raise HTTPException(status_code=401, detail="Invalid signature")
    
    # Parse event
    data = await request.json()
    event = data.get("event")
    
    if event == "call.ended":
        # –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–≤–æ–Ω–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (—á–µ—Ä–µ–∑ Celery)
        process_call_task.delay(data["call_id"])
    
    elif event == "call.missed":
        # –£–≤–µ–¥–æ–º–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–º –∑–≤–æ–Ω–∫–µ
        notify_missed_call.delay(data["phone_number"])
    
    return {"status": "ok"}
```

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ calls

```sql
CREATE TABLE calls (
    id SERIAL PRIMARY KEY,
    call_id VARCHAR(255) UNIQUE NOT NULL,
    phone_number VARCHAR(50) NOT NULL,
    direction VARCHAR(20) NOT NULL, -- inbound/outbound
    status VARCHAR(20) NOT NULL, -- answered/missed/busy
    duration INTEGER, -- seconds
    started_at TIMESTAMP NOT NULL,
    ended_at TIMESTAMP,
    recording_url TEXT,
    transcript TEXT,
    transcript_confidence FLOAT,
    classification JSONB,
    customer_id INTEGER REFERENCES customers(id),
    ticket_id INTEGER REFERENCES kaiten_tickets(id),
    vector_id UUID, -- ID –≤ Qdrant
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_calls_phone_number ON calls(phone_number);
CREATE INDEX idx_calls_started_at ON calls(started_at);
CREATE INDEX idx_calls_customer_id ON calls(customer_id);
```

---

## –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–æ–Ω–∫–æ–≤**
   - –í—Ö–æ–¥—è—â–∏–µ/–∏—Å—Ö–æ–¥—è—â–∏–µ
   - –û—Ç–≤–µ—á–µ–Ω–Ω—ã–µ/–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ
   - –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

2. **–¢–æ–ø –≤–æ–ø—Ä–æ—Å–æ–≤**
   - –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–≤
   - –í—ã—è–≤–ª–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ç–µ–º

3. **Quality Score**
   - Confidence —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
   - –ü–æ–ª–Ω–æ—Ç–∞ –æ—Ç–≤–µ—Ç–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞

4. **Conversion to Tickets**
   - –°–∫–æ–ª—å–∫–æ –∑–≤–æ–Ω–∫–æ–≤ –ø—Ä–∏–≤–µ–ª–∏ –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Ç–∏–∫–µ—Ç–æ–≤
   - –í—Ä–µ–º—è —Ä–µ—à–µ–Ω–∏—è

### Dashboard (Grafana)

```yaml
Metrics:
  - calls_total{direction="inbound|outbound", status="answered|missed"}
  - calls_duration_seconds_avg
  - transcription_confidence_avg
  - tickets_created_from_calls_total
  - top_call_topics
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- Bearer Token –¥–ª—è MTS API (—Ö—Ä–∞–Ω–∏—Ç—å –≤ `.env` –∏–ª–∏ Vault)
- HMAC –ø–æ–¥–ø–∏—Å—å –¥–ª—è webhook (–ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏)

### 2. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Üí —à–∏—Ñ—Ä–æ–≤–∞—Ç—å –≤ –ë–î
- TLS/SSL –¥–ª—è –≤—Å–µ—Ö API –≤—ã–∑–æ–≤–æ–≤

### 3. GDPR/–ó–∞–∫–æ–Ω –æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –•—Ä–∞–Ω–∏—Ç—å –∑–∞–ø–∏—Å–∏ –∑–≤–æ–Ω–∫–æ–≤ –Ω–µ –¥–æ–ª—å—à–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 90 –¥–Ω–µ–π)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –∑–∞–ø—Ä–æ—Å—É –∫–ª–∏–µ–Ω—Ç–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∑–∞–ø–∏—Å—è–º

---

## –°—Ç–æ–∏–º–æ—Å—Ç—å

### MTS Digital PBX
- **–ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:** –æ—Ç ‚ÇΩ3000/–º–µ—Å—è—Ü (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∞—Ä–∏—Ñ–∞)
- **–ú–∏–Ω—É—Ç—ã –∑–≤–æ–Ω–∫–æ–≤:** ‚ÇΩ1-3 –∑–∞ –º–∏–Ω—É—Ç—É (–≤—Ö–æ–¥—è—â–∏–µ –æ–±—ã—á–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã)
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π:** ‚ÇΩ500-1000/–º–µ—Å—è—Ü –∑–∞ 10GB

### OpenAI Whisper
- **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è:** $0.006 –∑–∞ –º–∏–Ω—É—Ç—É
- **–ü—Ä–∏–º–µ—Ä:** 100 –∑–≤–æ–Ω–∫–æ–≤/–¥–µ–Ω—å √ó 3 –º–∏–Ω = 300 –º–∏–Ω/–¥–µ–Ω—å = $1.8/–¥–µ–Ω—å ‚âà $54/–º–µ—Å—è—Ü

### Embeddings
- **text-embedding-3-small:** $0.00002 –∑–∞ 1K tokens
- **–ü—Ä–∏–º–µ—Ä:** 100 —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–≤/–¥–µ–Ω—å √ó 500 tokens = 50K tokens/–¥–µ–Ω—å ‚âà $1/–¥–µ–Ω—å ‚âà $30/–º–µ—Å—è—Ü

**–ò—Ç–æ–≥–æ:** ~‚ÇΩ3000-10000 + $84/–º–µ—Å—è—Ü

---

## Roadmap

### Phase 1 (MVP)
- ‚úÖ Webhook endpoint
- ‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —á–µ—Ä–µ–∑ Whisper
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã

### Phase 2
- ‚úÖ –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ Qdrant
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤
- ‚úÖ –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏

### Phase 3
- üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –¥–∞—à–±–æ—Ä–¥—ã
- üéØ Sentiment analysis (–∞–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–π)
- ü§ñ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (real-time –ø–æ–¥—Å–∫–∞–∑–∫–∏)
- üìû –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (IVR –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ö–ª–∏–µ–Ω—Ç –∑–≤–æ–Ω–∏—Ç —Å –≤–æ–ø—Ä–æ—Å–æ–º

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ö–ª–∏–µ–Ω—Ç –∑–≤–æ–Ω–∏—Ç: "–£ –º–µ–Ω—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç API, –ø–æ–ª—É—á–∞—é –æ—à–∏–±–∫—É 403"
2. –û–ø–µ—Ä–∞—Ç–æ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–∞—à API –∫–ª—é—á..."
3. –ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
   - –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
   - –í–µ–∫—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è –∏ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
   - –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ AI-–±–æ—Ç –≤ Telegram —Å–º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –ø–æ—Ö–æ–∂–∏–π –≤–æ–ø—Ä–æ—Å

### –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ö–ª–∏–µ–Ω—Ç –∑–≤–æ–Ω–∏—Ç –≤ 02:00 –Ω–æ—á–∏ (–Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è)
2. –ó–≤–æ–Ω–æ–∫ –Ω–µ –æ—Ç–≤–µ—á–µ–Ω
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –∫–æ–º–∞–Ω–¥–µ
   - "üìû –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫ –æ—Ç +7916XXXXXX –≤ 02:00"
   - –ò—Å—Ç–æ—Ä–∏—è –∫–ª–∏–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç—å"

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ø—Ä–æ–±–ª–µ–º–∞

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ó–∞ –Ω–µ–¥–µ–ª—é 15 –∫–ª–∏–µ–Ω—Ç–æ–≤ –∑–≤–æ–Ω—è—Ç —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –≤–æ–ø—Ä–æ—Å–æ–º
2. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤—ã—è–≤–ª—è–µ—Ç:**
   - –¢–æ–ø –≤–æ–ø—Ä–æ—Å: "–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å webhook?"
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –î–æ–±–∞–≤–∏—Ç—å –≤ FAQ, —É–ª—É—á—à–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## FAQ

### Q: –ß—Ç–æ –µ—Å–ª–∏ MTS API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω?
**A:** –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∑–≤–æ–Ω–∫–æ–≤. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ—Ç. –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å fallback: webhook retry logic –∏–ª–∏ scheduled pull –≤–º–µ—Å—Ç–æ real-time.

### Q: –ö–∞–∫ –±—ã—Ç—å —Å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å—é?
**A:** –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã —à–∏—Ñ—Ä—É—é—Ç—Å—è –≤ –ë–î. –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ N –¥–Ω–µ–π.

### Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é –ê–¢–°?
**A:** –î–∞, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è Zadarma, –ú–µ–≥–∞—Ñ–æ–Ω, Asterisk –∏ —Ç.–¥.

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2026-01-08  
**–ê–≤—Ç–æ—Ä:** Dialog Keeper Team  
**–ö–æ–º–ø–∞–Ω–∏—è:** –†–ò–ü–ê–°

